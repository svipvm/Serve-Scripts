# Headscale 部署配置
# 复制此文件为 .env 并修改相应配置
# 
# 云服务器必需开放的端口（安全组）：
#   - 8080/tcp : Headscale HTTPS 服务（Tailscale 客户端连接）
#   - 3478/udp : STUN/DERP 服务（NAT 穿透必需）
# 可选端口：
#   - 9090/tcp : Metrics 监控
#   - 50443/tcp : gRPC 远程控制

# 服务器公网 IP 或域名（必填）
SERVER_HOST=your-server-ip-or-domain

# Headscale 服务端口（内部使用，一般不修改）
HEADSCALE_PORT=8080
HEADSCALE_GRPC_PORT=50443
HEADSCALE_METRICS_PORT=9090
HEADSCALE_STUN_PORT=3478

# Caddy 代理端口
# CADDY_HTTPS_PORT 是外部访问的 HTTPS 端口（Tailscale 客户端连接）
CADDY_HTTP_PORT=80
CADDY_HTTPS_PORT=8080

# DERP 服务器配置
DERP_ENABLED=true
DERP_REGION_ID=999
DERP_REGION_CODE=headscale
DERP_REGION_NAME="Headscale Embedded DERP"
DERP_IPV6=""

# DNS 配置
DNS_MAGIC_DNS=false
DNS_BASE_DOMAIN=example.com

# TLS 配置（用于 Tailscale v1.90+ 客户端，必须启用 HTTPS）
# 设为 true 时，自动生成自签名证书
TLS_ENABLED=true
TLS_CERT_PATH=/opt/headscale/config/tls.crt
TLS_KEY_PATH=/opt/headscale/config/tls.key

# 网络配置
NETWORK_SUBNET=172.28.0.0/16
HEADSCALE_IP=172.28.0.10
CADDY_IP=172.28.0.30
