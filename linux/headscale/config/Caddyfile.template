{
    auto_https off
}

# HTTP 端口 - 基础服务
:80 {
    handle {
        respond "Headscale Server" 200
    }
}

# HTTPS 端口 - 用于 Tailscale 客户端连接 (需要信任自签名证书)
:${CADDY_HTTPS_PORT} {
    tls /opt/headscale/config/tls.crt /opt/headscale/config/tls.key
    
    reverse_proxy headscale:8081
}
